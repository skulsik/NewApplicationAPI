# NewApplicationAPI
## Описание проекта
Данный проект предназначен для демонстрации навыков в программировании на **PHP** и разработки приложения **REST Api** с использованием фреймворка **Laravel**. В проекте реализовано Api приложение в котором пользователи могут регистрироваться и оставлять заявки. Реализована функция суперпользователя, в которой администратор приложения может: обрабатывать заявки, назначать права зарегистрированным пользователям. При обработке заявки отправляется сообщение на email который указан в данной заявке. В качестве программного стека использовались: язык программирования PHP - 8.1, фреймворк Laravel - 10.1, база данных PostgreSQL - 14.9, BootStrap 5, ui auth, JWT - 2.0, Swagger - 8.5.

___

## Функционал проекта
Посредством Api пользователь без авторизации может оставлять заявки. Любой пользователь может зарегистрироваться, для выдачи ему прав модератора или суперадминистратора. Суперадминистратор может наделять правами зарегистрированных пользователей. Суперадминистратор и модератор могут управлять заявками.
> ### Функции
- [x] Регистрация
- [x] Авторизация
- [x] Деавторизация (с токеном)
- [x] Запрос профиля (с токеном)
- [x] Обновление токена (с токеном)
- [x] Запрос csrf токена
- [x] Создание заявки (с токенами: csrf + auth, права: root или moderator)
- [x] Запрос на список всех заявок (с токеном auth, права: root или moderator)
- [x] Запрос на одну заявку (с токеном auth, права: root или moderator)
- [x] Обработка заявки (с токенами: csrf + auth, права: root или moderator)
- [X] Отправка сообщения на почту клиенту по данной заявке (с токенами: csrf + auth, права: root или moderator)
- [x] Удаление заявки (с токеном auth, права: root или moderator)
- [x] Назначение прав пользователю (с токенами: csrf + auth, права: root)
- [x] Запрос на список пользователей (с токеном auth, права: root)
- [x] Валидация запросов

___

## Установка и настройка проекта
+ Клонировать проект ```git@github.com:skulsik/NewApplicationAPI.git```
+ переход в рабочую папку, выполните команду в терминале: cd app
+ установка зависимостей, выполните команду в терминале: composer install
+ в папке app создайте фаил .env и скопируйте туда все содержимое файла .env.example
+ генерация ключа проекта, выполните команду в терминале: php artisan key:generate
+ создайте базу данных(через консоль или через программы с интерфейсом) с названием new_application_api, либо придумайте свое
+ в файле .env в настройках DB укажите: назавание базы данных, если вы создали бд под своим названием; имя пользователя и пароль
+ так же в файле .env укажите настройки почтового сервера
+ сделайте миграции, выполните команду в терминале: php artisan migrate
+ выполните команду в терминале для начального заполнения таблиц бд: php artisan db:seed
+ запустите проект и наслаждайтесь тестами, выполните команду в терминале: php artisan serve
+ Данные для входа суперпользователя:
    - email = admin@pochta.ru
    - password = admin

___

## Методы, функции, модели
### Конечные точки
 + POST /api/register - регистрация пользователя
 + POST /api/login - авторизация пользователя
 + GET /api/token/get_csrf_token - запрос csrf токена
 + GET /api/profile - запрос профиля авторизованного пользователя
 + GET /api/refresh - обновление токена
 + GET /api/logout - деавторизация пользователя
 + POST /api/application/create_application - создание заявки
 + GET /api/application/all_applications - запрос всех заявок
 + GET /api/application/get_application/{id} - запрос одной заявки
 + PATCH /api/application/completion_application/{id} - запись комментария к заявке, отправка сообщения на почту
 + POST /api/application/send_mail_comment_application/{id} - отправка сообщения клиенту
 + GET /api/application/delete_application/{id} - удаление заявки
 + POST /api/admin/assignment_right - назначение прав пользователю
 + GET /api/admin/get_all_users - запрос всех пользователей

### Контроллеры
Бизнес-логика вынесена в сервисный слой.